<ion-header>
  <ion-navbar>
    <ion-title>
      {{ 'players.players' | translate }}
    </ion-title>
    <ion-buttons end>
      <button light full [disabled]="game.players.length === 0" (click)="validate()">
        {{ "validate" | translate }}
        <ion-icon name="checkmark"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <button (click)="defineNumber()" full block>
    {{ "players.number" | translate }} : {{ game.players.length || 0 }}
  </button>

  <!-- <input [(colorPicker)]="color" [style.background]="color" [value]="color"/> -->

  <ion-list class="players_list">
    <ion-item *ngFor="let player of game.players; let i = index">
      <span class="player_color" [style.background-color]="player.color" item-left></span>
      <ion-input required type="text" placeholder="{{ 'players.name' | translate }}" [(ngModel)]="player.name" [disabled]="!game.id && player.id" (input)="setPlayerSelectable(player)"></ion-input>
      <ion-select class="player_select" [(ngModel)]="selectedPlayers[i]" (ionChange)="playerSelected(i)">
        <ion-option [value]="{}">{{ 'players.new_player' | translate }}</ion-option>
        <ion-option *ngFor="let p of ( allPlayers | availablePlayers : game.getPlayersIds() )" [value]="p">{{ p.name }}</ion-option>
      </ion-select>
      <ion-icon name="remove-circle" (click)="removePlayer(player)" item-right></ion-icon>
    </ion-item>
  </ion-list>
  <ion-buttons end>
    <button clear (click)="addPlayer()">
      <ion-icon name="add-circle"></ion-icon>
      {{ "players.add" | translate }}
    </button>
  </ion-buttons>
</ion-content>
